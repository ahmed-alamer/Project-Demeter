<div class="panel panel-default">
    <div class="panel-heading">
      <h3 class="panel-title"><%= @view_title %></h3>
    </div>
    <div class="panel-body">
      <%= form_for(@project, layout: :basic) do |f| %>
        <% if @project.errors.any? %>
          <div id="error_explanation">
            <h2><%= pluralize(@project.errors.count, "error") %> prohibited this project from being saved:</h2>

            <ul>
            <% @project.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
            </ul>
          </div>
        <% end %>

        <div class="field">
          <%= f.text_field :GUID, :label => "GUID" %>
        </div>
        <div id="bloodhound">
          <%= f.text_field :claimant_id%>
        </div>
        <div class="field">
          <%= f.text_field :name %>
        </div>
        <div class="field">
          <%= f.text_field :nameplate %>
        </div>
        <div class="field">
          <%= f.text_field :address %>
        </div>
        <div class="field">
          <%= f.text_field :post_code %>
        </div>
        <div class="field">
          <%= f.text_field :country %>
        </div>
        <div class="field">
          <%= f.text_field :install_date %>
        </div>
        <div class="actions">
          <%= f.submit %>
          <%= link_to "Back", projects_path, :class => "btn btn-default" %>
        </div>
      <% end %>
    </div>
    <script type="text/javascript">
      
      var theFuckingClaimants = new Bloodhound({
        datumTokenizer: Bloodhound.tokenizers.obj.whitespace('name'),
        queryTokenizer: Bloodhound.tokenizers.whitespace,
        remote: {
          url: '/claimants.json'
        }
      });
      // $("#project_claimant_id").typeahead({
      //   hint: true,
      //   highlight: true,
      //   minLength: 1
      // },
      // {
      //     name: 'projects',
      //     displayKey: 'id',
      //     source: theFuckingClaimants.ttAdapter(),
      //     templates: {
      //         suggestion: function (project) {
      //             return '<p>' + project.name + '</p>';
      //         }
      //     }
      // });
      $('#project_claimant_id').typeahead({
        hint: true,
        highlight: true,
        minLength: 1
      },
      {
        name: 'projects',
        displayKey: "name",
        source: theFuckingClaimants
      });
    </script>
</div>